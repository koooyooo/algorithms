> Lomuto という概念を知らないので、そこから押さえたいです。

いい視点です！💡
「Lomuto（ロムート）分割法」は **クイックソートやクイックセレクトでよく使われる配列分割（partition）アルゴリズム** の一つです。
同じ用途の「Hoare（ホーア）分割法」とセットで語られることが多いです。

---

## 🔹 Lomuto 分割法の特徴

* **実装がシンプル**（教科書に載りやすい）
* ピボットを 1 要素に決めて、配列の末尾に置いておく
* 配列を 1 本のループで走査し、
  「pivot 以下」と「pivot より大きい」に分ける
* 最後にピボットを「境界の位置」に置き直す

---

## 🔹 擬似コード（Lomuto）

```
function partition(A, lo, hi):
    pivot = A[hi]           # 末尾をピボットとする
    i = lo
    for j = lo to hi-1:
        if A[j] <= pivot:
            swap A[i] and A[j]
            i = i + 1
    swap A[i] and A[hi]
    return i   # pivotの確定位置
```

* ループ中は「`<= pivot` を左に寄せる」動作を繰り返す
* `i` が「pivotの最終位置」を指す

---

## 🔹 具体例

配列 `[3, 8, 2, 5, 1, 4, 7, 6]`, ピボット = 6

1. `i = 0`、pivot=6
2. `j=0: 3<=6` → swap(i=0,j=0) → `[3,...]`、i=1
3. `j=1: 8>6` → 何もしない
4. `j=2: 2<=6` → swap(i=1,j=2) → `[3,2,8,...]`、i=2
5. `j=3: 5<=6` → swap(i=2,j=3) → `[3,2,5,8,...]`、i=3
6. `j=4: 1<=6` → swap(i=3,j=4) → `[3,2,5,1,8,...]`、i=4
7. `j=5: 4<=6` → swap(i=4,j=5) → `[3,2,5,1,4,8,...]`、i=5
8. `j=6: 7>6` → 何もしない
9. ループ終了 → swap(i=5, hi=7) → `[3,2,5,1,4,6,7,8]`

結果: pivot=6 が index=5 に確定。
左側はすべて `<=6`、右側はすべて `>6`。

---

## 🔹 Hoare 分割法との違い

* Hoare: 配列の両端から走査して「大きいのと小さいのを入れ替え」する方法。
  → swapの回数が少ない・効率的
* Lomuto: 実装が直感的で簡単（ただしswap回数が多い）。
  → 教科書や入門用に向いている

---

👉 まとめると：

* **Lomuto = 末尾をピボットにして、1本ループで「小さいものを前に詰める」シンプル分割法**。
* Quickselect のコードが「末尾に pivot を退避して、1本ループで swapして、最後に pivot を戻す」形をしているのは、まさに **Lomuto分割**の実装です。

---

ここで質問です：
理解を深めるために、次は **小さい配列で手計算トレース**を一緒にやってみますか？
（例： `[4, 2, 7, 1]` を pivot=末尾=1 として分割する）
